<template>
  <DomBoundary class="settings bg-gray-10/95 rounded p-4 flex flex-col space-y-4">
    <!-- Top -->
    <div class="flex justify-between space-x-4">
      <div></div>
      <NvCard class="inline-flex" size="sm">
        <div class="inline-flex space-x-2">
          <NvButton icon-name="times" size="xs" type="plain" @click="$emit('close')" />
        </div>
      </NvCard>
    </div>
    <div class="flex-1 relative">
      <div class="absolute inset-0">
        <div class="flex h-full">
          <div class="settings__sidebar">
            <!-- Side Nav -->
            <NvStack spacing="6">
              <template v-for="category in navigation" :key="category.name">
                <NvStack>
                  <NvText class="mx-3" type="subtitle">
                    {{ category.name }}
                  </NvText>
                  <NvStack spacing="2">
                    <template v-for="entry in category.children" :key="entry.name">
                      <router-link :to="entry.to || { name: 'settings' }" class="w-full">
                        <NvButton
                          :selected="currentRoute.name === entry.to?.name"
                          size="sm"
                          type="ghost-alt"
                          class="w-full"
                          >{{ entry.name }}
                        </NvButton>
                      </router-link>
                    </template>
                  </NvStack>
                </NvStack>
              </template>
            </NvStack>
          </div>
          <div class="settings__content flex-1 pl-4">
            <div class="h-full relative">
              <!-- View -->
              <router-view v-slot="{ Component }">
                <Transition class="transition">
                  <div :key="Component" class="absolute inset-0 overflow-y-auto">
                    <component :is="Component" />
                  </div>
                </Transition>
              </router-view>
            </div>
          </div>
        </div>
      </div>
    </div>
  </DomBoundary>
</template>
<script lang="ts" setup>
import { NvButton, NvCard, NvStack, NvText } from '@packages/ui'
import DomBoundary from '@/modules/vue-dom-boundaries/DomBoundary.vue'
import { useRoute } from 'vue-router'

const navigation = [
  {
    name: 'Application',
    children: [
      {
        name: 'Overview',
        to: { name: 'settings-overview' },
      },
      {
        name: 'Speech',
        to: { name: 'settings-speech' },
      },
      {
        name: 'Audio',
        to: { name: 'settings-audio' },
      },
      {
        name: 'Display',
        to: { name: 'settings-display' },
      },
      {
        name: 'Overlay',
      },
      {
        name: 'Dictionary',
        to: { name: 'settings-dictionary' },
      },
      {
        name: 'Keybindings',
        to: { name: 'settings-keybindings' },
      },
      {
        name: 'Startup',
        to: { name: 'settings-startup' },
      },
      {
        name: 'Update',
        to: { name: 'settings-update' },
      },
    ],
  },
  {
    name: 'Other',
    children: [
      {
        name: 'About',
      },
      { name: 'Support' },
    ],
  },
]
const currentRoute = useRoute()
</script>
<style lang="scss" scoped>
.settings {
  width: 768px;
  height: 500px;

  .settings__sidebar {
    width: 150px;
  }

  .settings__content {
    overflow-y: auto;
  }
}
</style>
